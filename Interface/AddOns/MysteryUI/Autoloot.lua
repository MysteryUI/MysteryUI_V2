-- by Tarkumi
local addon = CreateFrame("Frame", nil, UIParent)

lootables = {
10938,10939,10940,10978,10998,11082,11083,11084,11134,11135,11137,11138,11139,11174,11175,11176,11177,11178,14343,14344,16202,16203,16204,20725,22445,22446,22447,22448,22449,22450,34052,34053,34054,34055,34056,34057,52555,52718,52720,52721,52722,
118,858,929,1710,2455,2961,3371,3385,3820,3827,3857,3928,4603,6149,6289,6291,6292,6294,6295,6299,6303,6307,6308,6309,6310,6311,6317,6351,6352,6353,6354,6355,6356,6357,6358,6359,6361,6362,6458,6470,6511,6522,6643,6717,6718,7078,7973,8365,12238,13422,13443,13446,13754,13755,13757,13758,13759,13760,13874,13875,13876,13877,13883,13885,13886,13888,13889,13890,13893,13901,13918,16967,16968,16969,16970,19807,19975,20708,20709,21071,21113,21114,21150,21151,21153,21228,22578,24476,27388,27422,27425,27429,27435,27437,27438,27439,27481,27511,27513,27515,27516,33823,33824,34864,34865,34866,34867,34868,35285,35286,35313,36781,37705,40199,41800,41802,41803,41805,41806,41807,41808,41809,41810,41812,41813,41814,43571,43572,43646,43647,43652,43695,43696,43701,43702,43703,43704,43705,43706,43707,43708,43709,43710,43711,43712,43713,43714,43715,43716,43717,43718,43719,43720,43721,43722,43723,44475,44756,45188,45189,45190,45191,45194,45195,45196,45197,45198,45199,45200,45201,45202,45328,45902,45903,45904,45905,45907,45909,52325,52326,53062,53063,53064,53065,53066,53067,53068,53069,53070,53071,53072,57245,58503,58787,58856,58899,58945,58946,58951,62512,
765,785,2447,2449,2450,2452,2453,3355,3356,3357,3358,3369,3818,3819,3820,3821,4625,5056,8153,8831,8836,8838,8839,8845,8846,11514,13463,13464,13465,13466,13467,13468,18222,18223,19726,22575,22576,22710,22785,22786,22787,22788,22789,22790,22791,22792,22793,22794,22795,23331,23987,23988,24401,25813,27859,29453,32468,32506,33452,35229,35947,36901,36903,36904,36905,36906,36907,36908,37704,37921,39516,39970,52328,52329,52983,52984,52985,52986,52987,52988,54627,54628,54630,58962,63122,67357,
39151,39334,39338,39339,39340,39341,39342,39343,43103,43104,43105,43106,43107,43108,43109,61979,61980,
774,818,1206,1210,1529,1705,2770,2771,2772,2775,2776,2835,2836,2838,3340,3858,3864,4278,5833,7076,7909,7910,7911,7912,8150,9262,10620,11370,11382,11513,11754,12361,12363,12364,12365,12799,12800,19774,21929,22202,22203,22573,22574,23077,23079,23107,23112,23117,23424,23425,23426,23427,23436,23437,23438,23439,23440,23441,24189,32227,32228,32229,32230,32231,32249,32388,32464,32506,33452,34907,35229,35624,35627,36728,36909,36910,36912,36917,36918,36920,36921,36923,36924,36926,36927,36929,36930,36932,36933,37700,37701,37702,37703,37705,39220,52177,52178,52179,52180,52181,52182,52183,52185,52190,52191,52192,52193,52194,52195,52325,52326,52327,52328,53038,54830,54831,56033,56034,56035,56036,56046,56047,56049,60486,
117,118,414,422,774,818,858,929,1206,1210,1529,1705,1707,1710,2070,2073,2287,2408,2409,2553,2555,2598,2676,3419,3609,3610,3770,3771,3864,3927,3928,4292,4293,4306,4338,4345,4346,4408,4409,4536,4537,4538,4539,4540,4541,4542,4544,4599,4601,4602,4603,4604,4605,4606,4607,4608,5361,5362,5363,5364,5367,5368,5369,5370,5371,5373,5374,5375,5376,5377,5427,5428,5429,5430,5431,5432,5433,5435,5498,5500,6150,6289,6303,6308,6344,6347,6348,6362,6716,7909,7910,8932,8948,8950,8952,8953,8959,10457,11602,16882,16883,16884,16885,17058,17124,21877,21929,22829,23117,23436,23437,23438,23439,23440,23441,27854,27855,27856,27858,27859,29448,29450,29569,29570,29571,29572,29575,29576,30458,30610,33447,33449,33452,33454,35947,35948,35950,35952,35953,36163,36862,36863,37350,37452,37467,38260,38261,38263,38264,38269,38273,38274,40202,43575,43576,43577,49424,58259,58261,58262,58263,58267,58269,63269,63271,63272,63273,63274,63275,63291,63292,63293,63296,63299,63300,63310,63311,63312,63313,63314,63316,63317,63318,63319,63321,63323,63327,63337,63341,63342,63343,63348,63349,68196,
774,818,1206,1210,1529,1705,3864,7909,7910,12361,12364,12799,12800,21929,23077,23079,23107,23112,23117,23436,23437,23438,23439,23440,23441,24243,36917,36918,36919,36920,36921,36922,36923,36924,36925,36926,36927,36928,36929,36930,36931,36932,36933,36934,52177,52178,52179,52180,52181,52182,52190,52191,52192,52193,52194,52195,52327,
783,2318,2319,2934,3299,4232,4234,4235,4304,4371,4375,4404,6470,6471,7286,7287,7392,8154,8165,8167,8169,8170,8171,8973,11512,12208,12366,12607,12731,15408,15410,15412,15414,15415,15416,15417,15419,17012,17057,18947,19767,19768,19936,20498,20499,20500,20501,21222,21887,23677,25409,25418,25649,25699,25700,25707,25708,27682,29539,29547,29548,32470,33567,33568,35229,36729,38557,38558,38561,42510,42542,44128,44687,52976,52977,52979,52980,52982,56053,57058,57059,57068,57070,67495,
	}
-- new
function addon:new()
	self:RegisterEvent("LOOT_OPENED");
	self:RegisterEvent("RAID_ROSTER_UPDATE");
	self:RegisterEvent("PARTY_MEMBERS_CHANGED");
	self:RegisterEvent("PLAYER_ENTERING_WORLD");

	self:SetScript("OnEvent", self.event)
end

function addon:event(event, lootmethod)
	if (event == "LOOT_OPENED") then
		if lootmethod == "1" then
			return
		end
		local items = GetNumLootItems()
		if items > 0 then
			for i=1, items do
				if LootSlotIsCoin(i) then
					LootSlot(i)
				else
					local itemlink = GetLootSlotLink(i)
					if itemlink then
						local _, itemnum = strsplit(":", itemlink)
						local _, _, itemquality = GetItemInfo(itemlink)
						if itemquality < 2 then
							LootSlot(i)
						elseif itemnum then
							itemid = tonumber(itemnum)
							for tindex, tvalue in ipairs(lootables) do
								if ( itemid == lootables[tindex] ) then
	--							if ( ( itemid == lootables[tindex] ) and ( not InCombatLockdown() ) ) then
									LootSlot(i)
								end
							end
						end
					end
				end
			end
		end	
	elseif (event == "RAID_ROSTER_UPDATE") or (event == "PARTY_MEMBERS_CHANGED") or (event == "PLAYER_ENTERING_WORLD") then
		if ( GetNumPartyMembers() > 0 ) or ( GetNumRaidMembers() > 0 ) then
			SetCVar( "autoLootDefault", 0 );
		else
			SetCVar( "autoLootDefault", 1 );
		end

	end
end


-- fire
addon:new()
